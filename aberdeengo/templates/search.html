{% extends "layout.html" %}
{% block content %}
        <h2>Search for an event.</h2>
        	<form action="{% url 'search'%}" method="get">
				<input type="text" name="q">
				<input type="submit" value="submit">
			</form>
        </div>
    </div>
    {% for event in events %}
   <div class="col-xs-6 col-lg-4">
    <h2><a href="{% url 'event' event.id %}">{{ event.title }}</a></h2>
    {% if clashes %}
          <div class="alert-warning" role="alert">Clashes with <a href="{% url 'event' clashes.id%}">{{clashes.title}}</a></div>
    {% endif %}
    <p>From: {{ event.start_time|date:"D d M Y P" }}</p>
    <p>To: {{ event.end_time|date:"D d M Y P" }}</p>
    <p>Description: {{ event.description }}</p>
    <form action="{% url 'scheduleevent' %}" method="post">
      {% csrf_token %}
      <input type="hidden" name="event_id" value="{{ event.id }}" />
      {% if event in scheduled_events %}
      <input type="hidden" name="schedule" value="0" />
      <input type="submit" value="Remove from Schedule"/>
      {% elif not clashes %}
      <input type="hidden" name="schedule" value="1" />
      <input type="submit" value="Add to Schedule"/>
      {% endif %}
    </form>
    </div>
    <div class="col-xs-6 col-lg-8">
      <h3>My Google Maps Demo</h3>
    <div id="map" style="width:100%;height:500px"></div>
    <script>
    function myMap() {
      var mapCanvas = document.getElementById("map");
      var mapOptions = {
        center: new google.maps.LatLng(57.164336, -2.104718), 
        zoom: 5
      }
      var map = new google.maps.Map(mapCanvas, mapOptions);
    }
    </script>

<script src="https://maps.googleapis.com/maps/api/js?callback=myMap"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyClKcWsgdYmlnLItSUiD5YaJgbrD9ahed4&callback=initMap">
    </script>
      
    </div>
    {% endfor %}
    
{%endblock %}

